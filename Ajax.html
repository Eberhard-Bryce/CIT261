<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>AJAX</title>
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" type="text/css" href='mainstyle.css'>
    <link rel="stylesheet" type="text/css" href='flexnav.css'>
    <script>
        $(document).ready(function () {
            //jQuery code goes here
        })
    </script>
    
    <script type="text/javascript">
    function getWeather() {
        document.getElementById("run").onclick = function weather() {
            var input = document.forms["myForm"]["city"].value;
            var Url = "http://api.openweathermap.org/data/2.5/weather?q=" + input + "&APPID=d7bddd43bfa6f4bf2544c7397e4c94fc&units=imperial";
            var call = new XMLHttpRequest();
            call.open("GET", Url, true);
            call.send();
            call.onreadystatechange = process;
            function process() {
                if (call.readyState == 4 && call.status == 200) {
                    var request = JSON.parse(call.responseText);
                    document.getElementById("city").innerHTML = request.name;
                    document.getElementById("weather").innerHTML = request.weather.main;
                    document.getElementById("temp").innerHTML = request.main.temp;
                    document.getElementById("humidity").innerHTML = request.main.humidity;
                    document.getElementById("windSpeed").innerHTML = request.wind.speed;
                   
                    
                }
            }
    }
    }
   
   
            
    </script>
</head>

<body>
    <script>
        function topNavButton() {
            document.getElementsByClassName("topnav")[0].classList.toggle("responsive");
        }
    </script>
    <header id="webBanner">
        <div class="center" id="wrapper">
            <img id="navBackImg" src="blackheader.png" alt="navback" height="75" style="width: 100%;">
            <h1 id="webHead">CIT 261</h1>
        </div>
        <nav>

            <div class="navigation">

                <div><a href="index.html">Home</a></div>
                <div class="dropdown">
                    <button class="dropbtn">Topics Menu</button>
                    <div class="dropdown-content">
                      <a href="index.html">Home Page</a>
                      <a href="JavaScript.html">Java Script</a>
                      <a href="JavaScript%20Objects.html">Java Script Objects</a>
                      <a href="JSON.html">JSON</a>  
                      <a href="Ajax.html">Ajax</a>
                      <a href="Local%20Storage.html">Local Storage</a>
                      <a href="DOM.html">DOM</a>
                      <a href="CSS%20Class%20Properties.html">CSS Class Properties</a> 
                      <a href="JavaScript%20Events.html">Java Script Events</a>
                      <a href="HTML5%20Tags.html">HTML5 Tags</a>
                      <a href="CSS3%20Transitions.html">CSS3 Transitions</a>
                      <a href="CSS3%20Transforms.html">CSS3 Transforms</a>
                      <a href="CSS3%20Animations.html">CSS3 Animations</a>
                    </div>
                </div>   
        </nav>
    </header>
    <main>
        <h1 class="center"> Current Weather</h1>
        <ul class="center">
            <li>Summary:This page is using the open weather API to allow the user to search the current temperature, humidity, wind, and description. This is then displayed with AJAX. Please use the search bar below to search the weather report for any city. Spelling matters and if you misspell the city you will not get the results back.</li>
        </ul>
        
        <div class="center">
        <h3 class="center">Enter City Name</h3>
        </div>
        
        <div class="center">
        <form name="myForm">
        <input type="text" name="city" placeholder="City Name">
        <button id="run" onclick="getWeather()">Search City</button>
        </form>
        </div>
        
        <div class="center">
        City: <a id="name"></a><br>
        Weather: <a id="weather"></a><br>
        Temperature: <a id="temp"></a><br>
        Humidity: <a id="humidity"></a><br>
        Wind Speed: <a id="windSpeed"></a><br>
        
        </div>

    </main>
    <footer>
        <small id="flexFooter"> Last Updated: Feb 21, 2019</small>
    </footer>
</body>

</html>
